---
const currentPath = Astro.url.pathname;

const menuItems = [
  {
    title: 'Capítulo 1: Auditoría de Realidad',
    items: [
      { label: 'Tesoreria', href: '/dashboard/capitulo-1/tesoreria' },
      { label: 'Tiempo', href: '/dashboard/capitulo-1/tiempo' },
      { label: 'Vitalidad', href: '/dashboard/capitulo-1/vitalidad' },
      { label: 'Influencia', href: '/dashboard/capitulo-1/influencia' },
    ],
  },
  {
    title: 'Capítulo 2: Reprogramación Mental',
    items: [
      { label: 'Cazador de Excusas', href: '/dashboard/capitulo-2/excusas' },
      { label: 'Martillo de Creencias', href: '/dashboard/capitulo-2/creencias' },
      { label: 'Salto de Paradigma', href: '/dashboard/capitulo-2/paradigma' },
    ],
  },
  {
    title: 'Capítulo 3: Diseño de Futuro',
    items: [
      { label: '3 Misiones Imposibles', href: '/dashboard/capitulo-3/misiones' },
      { label: 'Tarjeta de Meta', href: '/dashboard/capitulo-3/tarjeta' },
    ],
  },
  {
    title: 'Capítulo 4: Maestría',
    items: [
      { label: 'Auditoría de las 3 Rs', href: '/dashboard/capitulo-4/auditoria' },
      { label: 'Retos de Maestría', href: '/dashboard/capitulo-4/retos' },
    ],
  },
];
---

<aside class="w-64 bg-white border-r border-slate-100 h-screen fixed left-0 top-0 overflow-y-auto hidden md:block z-40">
  <div class="p-6">
    <a href="/dashboard" class="block mb-8">
      <img src="/Sergio.png" alt="Sergio Nolasco" class="h-10 w-auto" />
    </a>

    <nav class="space-y-8">
      <div>
        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">
          Principal
        </h3>
        <ul class="space-y-1">
          <li>
            <a
              href="/dashboard"
              class:list={[
                'block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200',
                currentPath === '/dashboard'
                  ? 'bg-primary/10 text-primary'
                  : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900',
              ]}
            >
              Panel de Control
            </a>
          </li>
        </ul>
      </div>

      {menuItems.map((chapter) => (
        <div>
          <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">
            {chapter.title}
          </h3>
          <ul class="space-y-1">
            {chapter.items.map((item) => {
              const isActive = currentPath === item.href;
              return (
                <li>
                  <a
                    href={item.href}
                    class:list={[
                      'block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200',
                      isActive
                        ? 'bg-primary/10 text-primary'
                        : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900',
                    ]}
                  >
                    {item.label}
                  </a>
                </li>
              );
            })}
          </ul>
        </div>
      ))}
    </nav>
    
    <div class="pt-8 mt-8 border-t border-slate-100">
      <a href="/logout" class="flex items-center gap-3 text-slate-600 hover:text-red-500 transition-colors px-3 py-2 text-sm font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd" />
        </svg>
        Cerrar Sesión
      </a>
    </div>
  </div>
</aside>
